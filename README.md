# Septa Cup Backend

Бэкенд на Django REST Framework.

Аутентификация через социальные сети: VK, Google, ... .

Новости. Создание и редактирование новостей с помощью редактора в администраторской панели. 

Архив игр. Сайт и рейтинговую систему связывают игры. С помощью сайта можно получить данные об играх участников, посмотреть метаданные игры (участники партии, счет, статус (сыграно или обрабатывается), лог игры для просмотра в визуализаторе).

Профиль. Отправка архива, содержащего стратегию участника, с ограничением на размер 20 МБ, посмотр своих (тот же архив игр, только для своих игр), редактирование данных профиля (имя, аватар).


## Users app

### Регистрация нового пользователя
_~/auth/users/_ 

POST (в body указывать следующие поля со значениями: username, password, email)

На указанный email придет письмо со ссылкой для подтверждения регистрации.

В письме ссылка вида http://127.0.0.1:8000/#/activate/Nw/ac9lkb-89b0d4648ab93f9ebf93d459a5d175eb.
Для этой ссылки uid - Nw, token - ac9lkb-89b0d4648ab93f9ebf93d459a5d175eb

### Подтверждение регистрации (активация пользователя)
_~/auth/users/activation/_

POST (в body указывать следующие поля со значениями: uid, token)

страница возвращает 204

### Получение jwt-токена
_~/auth/jwt/create_

POST (в body указывать следующие поля со значениями: username, password)

страница возвращает 
`{
    "refresh": <>,
    "access": <>
}
`
### Проверить, что пользователь авторизован
_~/auth/users/me/_ 

GET (в headers указывать следующие поля со значениями: Authorization - JWT <token>)

страница возвращает 
`{
    "email": <>,
    "id": <>,
    "username": <>
}
`
## News app

### Список новостей
_~/api/news/_

GET (для любого пользователя)

количество новостей на одну страницу в _settings.py_, _REST_FRAMEWORK ('PAGE_SIZE')_

страница возвращает
`{
    "count": <количество новостей всего>,
    "next": <ссылка на следующую страницу списка>,
    "previous": <ссылка на предыдущую страницу списка>,
    "results": [
        {
            "title":<>,
            "slug": <>,
            "publish": <>"
        },
        ...
        {
            "title": <>,
            "slug": <>,
            "publish": <>"
        }
    ]
}`

### Создать новость
_~/api/news/create/_

POST (администратор)

### Детальный просмотр/изменение новости
_~/api/news/<id новости>/_

GET (для любого пользователя)

страница возвращает
`{
    "id": 3,
    "title": <>,
    "slug": <>,
    "body": {
        "time": 1606495560832,
        "blocks": [
            {
                "data": {
                    "text": <>"
                },
                "type": "paragraph"
            }
        ],
        "version": "2.19.0"
    },
    "publish": "2020-11-27T21:45:05+05:00",
    "created": "2020-11-27T21:46:07.282271+05:00",
    "updated": "2020-11-27T21:46:07.282271+05:00",
    "status": "published" или "draft"
}`

PUT/DELETE (администратор)
